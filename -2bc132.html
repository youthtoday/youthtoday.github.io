<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>类文件结构&nbsp;|&nbsp;Nick的博客</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="类文件结构">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="-fe1f32.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📚&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>分类</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>关于我</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">类文件结构</h1>
    
      <div class="DateTagBar">
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/Java基础.html">Java基础</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--default">
            <a href="tag/JVM.html">JVM</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/2bc132cd17544c02aaf29d7dc1f3f9cf" class="PageRoot"><div id="https://www.notion.so/732fd5168f5f435d950937ad32cc0160" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在Java中，JVM可理解的代码称为“字节码”（即扩展名为.class的文件）。它不面向任何处理器，只面向虚拟机。Java 语言通过字节码的方式，在一定程度上解决了传统解释型语言执行效率低的问题，同时又保留了解释型语言可移植的特点。所以 Java 程序运行时比较高效，而且，由于字节码并不针对一种特定的机器，因此，Java 程序无须重新编译便可在多种不同操作系统的计算机上运行。</span></span></p></div><div id="https://www.notion.so/83be54a26a7c44c2b9cacfc312e42718" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">JRuby、Groovy、Scala等语言都由各自的编译器编译成字节码文件，可以运行在java虚拟机上。</span></span></p></div><h1 id="https://www.notion.so/e35bd85fc7db454fb2a683c89e589a39" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/e35bd85fc7db454fb2a683c89e589a39"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">类文件结构</span></span></h1><div id="https://www.notion.so/469010e3faa549bfb8eeca26fa31de1b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">根据 Java 虚拟机规范，Class 文件通过 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ClassFile</code></span><span class="SemanticString">定义，有点类似 C 语言的结构体。</span></span></p></div><div id="https://www.notion.so/78d50343a920459bb8466a30f26825cc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ClassFile的结构如下：</span></span></p></div><pre id="https://www.notion.so/7d9cb33dec4a47f0913238e46b063f58" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token class-name">ClassFile</span> <span class="token punctuation">{</span>
u4             magic<span class="token punctuation">;</span> <span class="token comment">//Class 文件的标志</span>
u2             minor_version<span class="token punctuation">;</span><span class="token comment">//Class 的小版本号</span>
u2             major_version<span class="token punctuation">;</span><span class="token comment">//Class 的大版本号</span>
u2             constant_pool_count<span class="token punctuation">;</span><span class="token comment">//常量池的数量</span>
cp_info        constant_pool<span class="token punctuation">[</span>constant_pool_count<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//常量池</span>
u2             access_flags<span class="token punctuation">;</span><span class="token comment">//Class 的访问标记</span>
u2             this_class<span class="token punctuation">;</span><span class="token comment">//当前类</span>
u2             super_class<span class="token punctuation">;</span><span class="token comment">//父类</span>
u2             interfaces_count<span class="token punctuation">;</span><span class="token comment">//接口</span>
u2             interfaces<span class="token punctuation">[</span>interfaces_count<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//一个类可以实现多个接口</span>
u2             fields_count<span class="token punctuation">;</span><span class="token comment">//Class 文件的字段属性</span>
field_info     fields<span class="token punctuation">[</span>fields_count<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//一个类可以有多个字段</span>
u2             methods_count<span class="token punctuation">;</span><span class="token comment">//Class 文件的方法数量</span>
method_info    methods<span class="token punctuation">[</span>methods_count<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//一个类可以有个多个方法</span>
u2             attributes_count<span class="token punctuation">;</span><span class="token comment">//此类的属性表中的属性数</span>
attribute_info attributes<span class="token punctuation">[</span>attributes_count<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//属性表集合</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/1d991e465aec42b8858f6d25cff0194a" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc7d6242b-c4c3-4068-b20e-2ac575320315%2FUntitled.png?width=2212&amp;table=block&amp;id=1d991e46-5aec-42b8-858f-6d25cff0194a"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc7d6242b-c4c3-4068-b20e-2ac575320315%2FUntitled.png?width=2212&amp;table=block&amp;id=1d991e46-5aec-42b8-858f-6d25cff0194a" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/b505dd19b71c4d2288dd36cf0b3bca6d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/b505dd19b71c4d2288dd36cf0b3bca6d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">魔数Magic Number</span></span></h2><pre id="https://www.notion.so/a967da2da8324160b88c62b6d532932a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>    u4             magic; //Class 文件的标志
</span></span></span></code></pre><div id="https://www.notion.so/439f2f9ec80f40afbd63018b1aa6dfb7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">每个 Class 文件的头 4 个字节称为魔数（Magic Number）,它的唯一作用是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">确定这个文件是否为一个能被虚拟机接收的 Class 文件</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/3bdce4520fba4e9d891dd6a844853e1b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">程序设计者很多时候都喜欢用一些特殊的数字表示固定的文件类型或者其它特殊的含义。</span></span></p></div><h2 id="https://www.notion.so/d840bcb0e36849ecaa663c593ea2d299" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d840bcb0e36849ecaa663c593ea2d299"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Class 文件版本号（Minor&amp;Major Version）</span></span></h2><pre id="https://www.notion.so/d97671d617954b62a0b7a0f0194c3604" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>    u2             minor_version;//Class 的小版本号
    u2             major_version;//Class 的大版本号</span></span></span></code></pre><div id="https://www.notion.so/6d228970e8774f838746ae2fdee52ccc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">紧接着魔数的四个字节存储的是 Class 文件的版本号：第 5 和第 6 位是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">次版本号</strong></span><span class="SemanticString">，第 7 和第 8 位是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">主版本号</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/69b16c639db94e459c3d7456a791e162" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">每当 Java 发布大版本（比如 Java 8，Java9）的时候，主版本号都会加 1。你可以使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">javap -v</code></span><span class="SemanticString"> 命令来快速查看 Class 文件的版本号信息。</span></span></p></div><div id="https://www.notion.so/112ed9a7972c4eda8175bb8d85a81272" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">高版本的 Java 虚拟机可以执行低版本编译器生成的 Class 文件，但是低版本的 Java 虚拟机不能执行高版本编译器生成的 Class 文件。所以，我们在实际开发的时候要确保开发的的 JDK 版本和生产环境的 JDK 版本保持一致。</span></span></p></div><h2 id="https://www.notion.so/413dc13fc4d446008154d7934313df26" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/413dc13fc4d446008154d7934313df26"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">常量池（Constant Pool）</span></span></h2><pre id="https://www.notion.so/02c8058ae4344072a6381adb7c98164c" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>    u2             constant_pool_count;//常量池的数量
    cp_info        constant_pool[constant_pool_count-1];//常量池</span></span></span></code></pre><div id="https://www.notion.so/29f913ac6daa42a8907b99fb1ead1669" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">紧接着主次版本号之后的是常量池，常量池的数量是 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">constant_pool_count-1</code></span><span class="SemanticString">（</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">常量池计数器是从 1 开始计数的，将第 0 项常量空出来是有特殊考虑的，索引值为 0 代表“不引用任何一个常量池项”</strong></span><span class="SemanticString">）。</span></span></p></div><div id="https://www.notion.so/9880a0bb44f54a0892e656833c9afddd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">常量池主要存放两大常量：字面量和符号引用。字面量比较接近于 Java 语言层面的的常量概念，如文本字符串、声明为 final 的常量值等。而符号引用则属于编译原理方面的概念。包括下面三类常量：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/ef096c43410f405ca740a8b939faa59d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">类和接口的全限定名</span></span></li><li id="https://www.notion.so/9c8213aeb6a74f5bb9781e7b328c1dc7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">字段的名称和描述符</span></span></li><li id="https://www.notion.so/0998ad790efa41068780cf12f965597b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">方法的名称和描述符</span></span></li></ul><div id="https://www.notion.so/9fc9e520d7ac4a789d5cd099e5ae4668" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">常量池中每一项常量都是一个表，这 14 种表有一个共同的特点：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">开始的第一位是一个 u1 类型的标志位 -tag 来标识常量的类型，代表当前这个常量属于哪种常量类型．</strong></span></span></p></div><div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><div id="https://www.notion.so/5253026a48594153b461fc9fac67104b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.class</code></span><span class="SemanticString"> 文件可以通过</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">javap -v class类名</code></span><span class="SemanticString"> 指令来看一下其常量池中的信息(</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">javap -v class类名-&gt; temp.txt</code></span><span class="SemanticString"> ：将结果输出到 temp.txt 文件)。</span></span></p></div><h3 id="https://www.notion.so/045bd25b2af14422bfdc90e37003b045" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/045bd25b2af14422bfdc90e37003b045"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">访问标志(Access Flags)</span></span></h3><div id="https://www.notion.so/757169849b7545a6bb04448af012d4c0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在常量池结束之后，紧接着的两个字节代表访问标志，这个标志用于识别一些类或者接口层次的访问信息，包括：这个 Class 是类还是接口，是否为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">public</code></span><span class="SemanticString"> 或者 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">abstract</code></span><span class="SemanticString"> 类型，如果是类的话是否声明为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">final</code></span><span class="SemanticString"> 等等。</span></span></p></div><h3 id="https://www.notion.so/22c35428067949a2af7a30159344032f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/22c35428067949a2af7a30159344032f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">当前类（This Class）、父类（Super Class）、接口（Interfaces）索引集合</span></span></h3><pre id="https://www.notion.so/1f243361e4fb4037a3e7ac89d095d05d" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>    u2             this_class;//当前类
    u2             super_class;//父类
    u2             interfaces_count;//接口
    u2             interfaces[interfaces_count];//一个类可以实现多个接口</span></span></span></code></pre><div id="https://www.notion.so/1904a4e573eb4ed4b77f4a5bbc3975ff" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">类索引用于确定这个类的全限定名，父类索引用于确定这个类的父类的全限定名，由于 Java 语言的单继承，所以父类索引只有一个，除了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">java.lang.Object</code></span><span class="SemanticString"> 之外，所有的 java 类都有父类，因此除了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">java.lang.Object</code></span><span class="SemanticString"> 外，所有 Java 类的父类索引都不为 0。</span></span></p></div><div id="https://www.notion.so/6b90848834d244c4bc0029fbf7206d14" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">接口索引集合用来描述这个类实现了那些接口，这些被实现的接口将按 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">implements</code></span><span class="SemanticString"> (如果这个类本身是接口的话则是</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">extends</code></span><span class="SemanticString">) 后的接口顺序从左到右排列在接口索引集合中。</span></span></p></div><h3 id="https://www.notion.so/b312a07df81d4bca8958e8f8c9f610bc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b312a07df81d4bca8958e8f8c9f610bc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">字段表集合（Fields）</span></span></h3><pre id="https://www.notion.so/44b989bd317540feb180bcc6600fa632" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>    u2             fields_count;//Class 文件的字段的个数
    field_info     fields[fields_count];//一个类会可以有个字段</span></span></span></code></pre><div id="https://www.notion.so/09be4ce24a874a84b6882ac0c8fba27b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">字段表（field info）用于描述接口或类中声明的变量。字段包括类级变量以及实例变量，但不包括在方法内部声明的局部变量。</span></span></p></div><div id="https://www.notion.so/8a16d4109fc444619f86feb5fc73bdcd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">field info(字段表) 的结构:</strong></span></span></p></div><div id="https://www.notion.so/125a55e4e1d74dabb530495b316bcabe" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5c216256-e068-4ab8-aeb7-5a941260bb63%2FUntitled.png?width=581&amp;table=block&amp;id=125a55e4-e1d7-4dab-b530-495b316bcabe"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5c216256-e068-4ab8-aeb7-5a941260bb63%2FUntitled.png?width=581&amp;table=block&amp;id=125a55e4-e1d7-4dab-b530-495b316bcabe" style="width:581px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/ce60f41a0556423192e7a0ab30278379" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">access_flags:</strong></span><span class="SemanticString"> 字段的作用域（</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">public</code></span><span class="SemanticString"> ,</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">private</code></span><span class="SemanticString">,</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">protected</code></span><span class="SemanticString">修饰符），是实例变量还是类变量（</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">static</code></span><span class="SemanticString">修饰符）,可否被序列化（transient 修饰符）,可变性（final）,可见性（volatile 修饰符，是否强制从主内存读写）。</span></span></li><li id="https://www.notion.so/622edd82c32b40a8be9745938d5942cd" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">name_index:</strong></span><span class="SemanticString"> 对常量池的引用，表示的字段的名称；</span></span></li><li id="https://www.notion.so/3f208d0cd3ce4a91a5023fc12634ea1e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">descriptor_index:</strong></span><span class="SemanticString"> 对常量池的引用，表示字段和方法的描述符；</span></span></li><li id="https://www.notion.so/4daceefc516b4ed5a0b2f7cd5dd708cd" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">attributes_count:</strong></span><span class="SemanticString"> 一个字段还会拥有一些额外的属性，attributes_count 存放属性的个数；</span></span></li><li id="https://www.notion.so/688c53d097d8405b90e23b1fdbc11442" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">attributes[attributes_count]:</strong></span><span class="SemanticString"> 存放具体属性具体内容。</span></span></li></ul><div id="https://www.notion.so/f7e64cc9d37d40898d7b3161c6baf572" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">上述这些信息中，各个修饰符都是布尔值，要么有某个修饰符，要么没有，很适合使用标志位来表示。而字段叫什么名字、字段被定义为什么数据类型这些都是无法固定的，只能引用常量池中常量来描述。</span></span></p></div><h3 id="https://www.notion.so/d573c4140d3945a19181090230191da1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d573c4140d3945a19181090230191da1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">方法表集合（Methods）</span></span></h3><pre id="https://www.notion.so/e40179bafd644778b38707a1dfa15e12" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>    u2             methods_count;//Class 文件的方法的数量
    method_info    methods[methods_count];//一个类可以有个多个方法</span></span></span></code></pre><div id="https://www.notion.so/4d805244e5664777be0d80b344545f83" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">methods_count 表示方法的数量，而 method_info 表示方法表。</span></span></p></div><div id="https://www.notion.so/fe92094f91ab40c696ca4cbf50ee42f4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Class 文件存储格式中对方法的描述与对字段的描述几乎采用了完全一致的方式。方法表的结构如同字段表一样，依次包括了访问标志、名称索引、描述符索引、属性表集合几项。</span></span></p></div><div id="https://www.notion.so/4729d99e53c94789a5b429f92b8f47fc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">method_info（方法表）的结构：</span></span></p></div><div id="https://www.notion.so/9ac97954ce5c4e65825749a5a74a8da0" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F712481b8-46fc-4510-996d-2e82db4c357f%2FUntitled.png?width=550&amp;table=block&amp;id=9ac97954-ce5c-4e65-8257-49a5a74a8da0"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F712481b8-46fc-4510-996d-2e82db4c357f%2FUntitled.png?width=550&amp;table=block&amp;id=9ac97954-ce5c-4e65-8257-49a5a74a8da0" style="width:550px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/cb97cf1d3dd647cc805a2b717e507e43" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/cb97cf1d3dd647cc805a2b717e507e43"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">属性表集合（Attributes）</span></span></h3><pre id="https://www.notion.so/0d26923c8b2e4d2bb89fd2b420e81e68" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>   u2             attributes_count;//此类的属性表中的属性数
   attribute_info attributes[attributes_count];//属性表集合
</span></span></span></code></pre><div id="https://www.notion.so/7263c61ee3fa4ed4a195822718c07a3b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 Class 文件，字段表，方法表中都可以携带自己的属性表集合，以用于描述某些场景专有的信息。与 Class 文件中其它的数据项目要求的顺序、长度和内容不同，属性表集合的限制稍微宽松一些，不再要求各个属性表具有严格的顺序，并且只要不与已有的属性名重复，任何人实现的编译器都可以向属性表中写 入自己定义的属性信息，Java 虚拟机运行时会忽略掉它不认识的属性。</span></span></p></div><div id="https://www.notion.so/fb45bb996f7844e38d4601bccf8461a4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
    <script src="https://utteranc.es/client.js"
        repo="youthtoday/youthtoday.github.io"
        issue-term="pathname"
        label="✨"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
  <footer class="Footer">
  <div>&copy; Nick的博客 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>
