<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>类加载&nbsp;|&nbsp;Nick的博客</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="类加载">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="-fe1f32.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📚&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>分类</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>关于我</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">类加载</h1>
    
      <div class="DateTagBar">
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/Java基础.html">Java基础</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--default">
            <a href="tag/JVM.html">JVM</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/f8ac424a1d4d4189b68cb2bf8aa06a16" class="PageRoot"><h1 id="https://www.notion.so/2a4bbba4215640a4b1933c2806b9721b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/2a4bbba4215640a4b1933c2806b9721b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">类的生命周期</span></span></h1><div id="https://www.notion.so/bad64a3e53b64daeba78ea818c7385aa" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F54522692-09aa-438b-beca-12d00738876d%2FUntitled.png?width=2138&amp;table=block&amp;id=bad64a3e-53b6-4dae-ba78-ea818c7385aa"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F54522692-09aa-438b-beca-12d00738876d%2FUntitled.png?width=2138&amp;table=block&amp;id=bad64a3e-53b6-4dae-ba78-ea818c7385aa" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h1 id="https://www.notion.so/20dedd5350294342bc04537dfdbdf890" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/20dedd5350294342bc04537dfdbdf890"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">类加载过程</span></span></h1><div id="https://www.notion.so/046e9c340f814c42ab6cc9272c17dba9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Class文件需要加载到虚拟机中才能使用。类加载就是将Class文件加载到内存。</span></span></p></div><div id="https://www.notion.so/53ea8885c189471cbb38005c14fa8b67" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">系统加载Class文件的三步：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">加载—连接—初始化</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/0b7fe282ca77462486147e718955783a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">连接</strong></span><span class="SemanticString">过程又可以分为：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">验证—准备—解析</strong></span><span class="SemanticString">。</span></span></p></div><h2 id="https://www.notion.so/531a48766a4f4be48c24b9cd59ca0baf" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/531a48766a4f4be48c24b9cd59ca0baf"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">加载</span></span></h2><div id="https://www.notion.so/2d42deacaa064833a68a5e509eee9900" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">加载步骤完成三件事：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/7804dfdefee54a4aa1b49362d8eb4a52" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">通过全类名获取此类的二进制字节流</span></span></li><li id="https://www.notion.so/1cdf0e76a41540e9873659cfd9a2c068" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">将字节流所代表的静态存储结构转换为方法区的运行时数据结构</span></span></li><li id="https://www.notion.so/e69f5e0bd12f4ac9bc04aee78381ffa8" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">在内存中生成一个代表该类的class对象，作为方法区这些数据的访问入口</span></span></li></ol><div id="https://www.notion.so/8ea4908a5fc04da4b6f21cbb11b3224e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">虚拟机规范上面这 3 点并不具体，因此是非常灵活的。比如：&quot;通过全类名获取定义此类的二进制字节流&quot; 并没有指明具体从哪里获取、怎样获取。比如：比较常见的就是从 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ZIP</code></span><span class="SemanticString"> 包中读取（日后出现的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">JAR</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">EAR</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">WAR</code></span><span class="SemanticString"> 格式的基础）、其他文件生成（典型应用就是 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">JSP</code></span><span class="SemanticString">）等等。</span></span></p></div><div id="https://www.notion.so/da29f1e0d5d24aa5ba6a1cbdf173b382" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">非数组类的加载阶段（加载阶段获取类的二进制字节流的动作）是可控性最强的阶段，这一步我们可以去完成还可以自定义类加载器去控制字节流的获取方式（重写一个类加载器的 </strong></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">loadClass()</strong></code></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> 方法）。</strong></span></span></p></div><div id="https://www.notion.so/da3d11dad57d49d582cbc17ac0c8d62f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">数组类型不通过类加载器创建，它由 Java 虚拟机直接创建。</strong></span></span></p></div><div id="https://www.notion.so/02b7d253c6fe4d17b318e7e55c964644" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">加载阶段和连接阶段的部分内容是交叉进行的，加载阶段尚未结束，连接阶段可能就已经开始了。</span></span></p></div><h2 id="https://www.notion.so/3703089f9c334a26be1f9672f7519621" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/3703089f9c334a26be1f9672f7519621"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">连接</span></span></h2><h3 id="https://www.notion.so/5a8de8e35da346c1b8785ce19f4007ab" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/5a8de8e35da346c1b8785ce19f4007ab"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">验证</span></span></h3><div id="https://www.notion.so/f6155adea945426fa1d83ff2ea02b7f2" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa1fcfe65-9eaa-4b9e-a02a-45b86f1c08db%2FUntitled.png?width=523&amp;table=block&amp;id=f6155ade-a945-426f-a1d8-3ff2ea02b7f2"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa1fcfe65-9eaa-4b9e-a02a-45b86f1c08db%2FUntitled.png?width=523&amp;table=block&amp;id=f6155ade-a945-426f-a1d8-3ff2ea02b7f2" style="width:523px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/ead490366f2648b2aff8bfdd6abd2423" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ead490366f2648b2aff8bfdd6abd2423"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">准备</span></span></h3><div id="https://www.notion.so/8c3889e036384f7ab0161132977e3867" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">准备阶段是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">正式为类变量分配内存并设置类变量初始值的阶段</strong></span><span class="SemanticString">，这些内存都将在方法区中分配。</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/d06c6c737b3245718a12e0c106da997c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">这时候进行内存分配的仅包括类变量（ Class Variables ，即静态变量，被 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">static</code></span><span class="SemanticString"> 关键字修饰的变量，只与类相关，因此被称为类变量），而不包括实例变量。实例变量会在对象实例化时随着对象一块分配在 Java 堆中。</span></span></li><li id="https://www.notion.so/f44ad8f9424b44f2a925b9b54ccc429d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">从概念上讲，类变量所使用的内存都应当在 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">方法区</strong></span><span class="SemanticString"> 中进行分配。不过有一点需要注意的是：JDK 7 之前，HotSpot 使用永久代来实现方法区的时候，实现是完全符合这种逻辑概念的。 而在 JDK 7 及之后，HotSpot 已经把原本放在永久代的字符串常量池、静态变量等移动到堆中，这个时候类变量则会随着 Class 对象一起存放在 Java 堆中。</span></span></li><li id="https://www.notion.so/2a34d96959c243a5a59925184b4440e2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">这里所设置的初始值&quot;通常情况&quot;下是数据类型默认的零值（如 0、0L、null、false 等），比如我们定义了</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">public static int value=111</code></span><span class="SemanticString"> ，那么 value 变量在准备阶段的初始值就是 0 而不是 111（初始化阶段才会赋值）。特殊情况：比如给 value 变量加上了 final 关键字</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">public static final int value=111</code></span><span class="SemanticString"> ，那么准备阶段 value 的值就被赋值为 111。</span></span></li></ul><div id="https://www.notion.so/327c8b5c5b5949f69d28f486da2ff1f3" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa3afce5d-65aa-4338-8c9b-b2b4ca9110ed%2FUntitled.png?width=861&amp;table=block&amp;id=327c8b5c-5b59-49f6-9d28-f486da2ff1f3"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa3afce5d-65aa-4338-8c9b-b2b4ca9110ed%2FUntitled.png?width=861&amp;table=block&amp;id=327c8b5c-5b59-49f6-9d28-f486da2ff1f3" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/b7d5f60df13a47bba2bd36b043daa4b4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b7d5f60df13a47bba2bd36b043daa4b4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">解析</span></span></h3><div id="https://www.notion.so/bfbbacfe91b9406197d804334821caae" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">解析阶段是虚拟机</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">将常量池内的符号引用替换为直接引用</strong></span><span class="SemanticString">的过程。解析动作主要针对类或接口、字段、类方法、接口方法、方法类型、方法句柄和调用限定符 7 类符号引用进行。</span></span></p></div><div id="https://www.notion.so/81aefe6a561f4902b03e0edc3da69923" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">符号引用就是一组符号来描述目标，可以是任何字面量。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">直接引用</strong></span><span class="SemanticString">就是直接指向目标的指针、相对偏移量或一个间接定位到目标的句柄。在程序实际运行时，只有符号引用是不够的，举个例子：在程序执行方法时，系统需要明确知道这个方法所在的位置。Java 虚拟机为每个类都准备了一张方法表来存放类中所有的方法。当需要调用一个类的方法的时候，只要知道这个方法在方法表中的偏移量就可以直接调用该方法了。通过解析操作符号引用就可以直接转变为目标方法在类中方法表的位置，从而使得方法可以被调用。</span></span></p></div><div id="https://www.notion.so/fcd5805836734518816c3374af6a7160" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">综上，解析阶段是虚拟机将常量池内的符号引用替换为直接引用的过程，也就是得到类或者字段、方法在内存中的指针或者偏移量。</strong></span></span></p></div><h3 id="https://www.notion.so/4ded3b1f27dc4755b6f411aac2394be5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/4ded3b1f27dc4755b6f411aac2394be5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">初始化</span></span></h3><div id="https://www.notion.so/e8ceb83d98b84f318846422925b979e7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">初始化阶段是执行初始化方法 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&lt;clinit&gt; ()</code></span><span class="SemanticString">方法的过程，是类加载的最后一步，这一步 JVM 才开始真正执行类中定义的 Java 程序代码(字节码)。</span></span></p></div><blockquote id="https://www.notion.so/deb18329047e40e19d002217e5194479" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">说明： &lt;clinit&gt; ()方法是编译之后自动生成的。</span></span></blockquote><div id="https://www.notion.so/5253f302f37b4c8b8bd28aea7af10dbb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">对于</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&lt;clinit&gt; ()</code></span><span class="SemanticString"> 方法的调用，虚拟机会自己确保其在多线程环境中的安全性。因为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&lt;clinit&gt; ()</code></span><span class="SemanticString"> 方法是带锁线程安全，所以在多线程环境下进行类初始化的话可能会引起多个线程阻塞，并且这种阻塞很难被发现。</span></span></p></div><h2 id="https://www.notion.so/f029f7bceb1c4d958dd484fa3732411f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f029f7bceb1c4d958dd484fa3732411f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">卸载</span></span></h2><div id="https://www.notion.so/5dc59ccbe2984cf0b7802413f7ad8640" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">卸载类即该类的 Class 对象被 GC。</span></span></p></div><div id="https://www.notion.so/6743ad7f4a1e499b9806a6e65d28d56a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">卸载类需要满足 3 个要求:</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/e8e0608fa5dc43eb9f6a88e4d876a001" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">该类的所有的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">实例对象</strong></span><span class="SemanticString">都已被 GC，也就是说堆不存在该类的实例对象。</span></span></li><li id="https://www.notion.so/a977c48ad3494e3ea06573df9e517d7b" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">该类没有在其他任何地方被</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">引用</strong></span></span></li><li id="https://www.notion.so/92130823c6c44fec880f0ce5e5454b8d" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">该类的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">类加载器的实例</strong></span><span class="SemanticString">已被 GC</span></span></li></ol><div id="https://www.notion.so/80a5882188bb4c5fbfb811bb9979bd77" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以，在 JVM 生命周期内，由 jvm 自带的类加载器加载的类是不会被卸载的。但是由我们自定义的类加载器加载的类是可能被卸载的。</span></span></p></div><h1 id="https://www.notion.so/87c72c58d4b04430ae90ae53d6eb1228" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/87c72c58d4b04430ae90ae53d6eb1228"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">类加载器</span></span></h1><div id="https://www.notion.so/3b6ac5ace50d4d73af9b8e6778995a58" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">类加载过程的第一步“加载”中的第一步是：通过全类名获取类的二进制字节流。除了数组类之外的类都可以通过自定义类加载器来对二进制字节流进行获取。（重写一个类加载器的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">loadClass()</code></span><span class="SemanticString">
 方法）。数组类型不通过类加载器创建，它由 Java 虚拟机直接创建。</span></span></p></div><div id="https://www.notion.so/86a5fafdde4d4985950e016d6cee67eb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">JVM 中内置了三个重要的 ClassLoader，除了 BootstrapClassLoader 其他类加载器均由 Java 实现且全部继承自</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">java.lang.ClassLoader</code></span><span class="SemanticString">：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/a48fa568819647d293cd70620d7ce6cb" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">BootstrapClassLoader(启动类加载器)</strong></span><span class="SemanticString"> ：最顶层的加载类，由 C++实现，负责加载 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">%JAVA_HOME%/lib</code></span><span class="SemanticString">目录下的 jar 包和类或者被 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Xbootclasspath</code></span><span class="SemanticString">参数指定的路径中的所有类。</span></span></li><li id="https://www.notion.so/2dddd7214c5a4c54bb14283ef84ef64b" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ExtensionClassLoader(扩展类加载器)</strong></span><span class="SemanticString"> ：主要负责加载 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">%JRE_HOME%/lib/ext</code></span><span class="SemanticString"> 目录下的 jar 包和类，或被 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">java.ext.dirs</code></span><span class="SemanticString"> 系统变量所指定的路径下的 jar 包。</span></span></li><li id="https://www.notion.so/738a8588a32c4eeaa6590a0f37c62700" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">AppClassLoader(应用程序类加载器)</strong></span><span class="SemanticString"> ：面向我们用户的加载器，负责加载当前应用 classpath 下的所有 jar 包和类。</span></span></li></ol><h1 id="https://www.notion.so/2c3ad5611cdb400db2b3617d2ffe1924" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/2c3ad5611cdb400db2b3617d2ffe1924"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">双亲委派模型</span></span></h1><div id="https://www.notion.so/3a6289cdd4984de29d044e697fb68bc3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">每个类都有一个对应的类加载器。系统中的ClassLoader在协同工作的时候会默认使用</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">双亲委派模型</strong></strong></strong></strong></strong></strong></strong></strong></span><span class="SemanticString">：在加载类的时候，首先检查这个类有没有被加载过。已经加载的类会直接返回，否则尝试进行加载。加载的时候，首先会把请求委派给父类加载器，当父类加载器无法处理时，才会交给子类加载器来处理。每个类都有父类加载器，当父类加载器为null时，启动类加载器BootstrapClassLoader便是父类加载器。</span></span></p></div><div id="https://www.notion.so/91ed3db9be1043dcbaf85dfb4bfd45f9" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fecd0bfe3-394d-40f8-b598-81137ed64e27%2FUntitled.png?width=493&amp;table=block&amp;id=91ed3db9-be10-43dc-baf8-5dfb4bfd45f9"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fecd0bfe3-394d-40f8-b598-81137ed64e27%2FUntitled.png?width=493&amp;table=block&amp;id=91ed3db9-be10-43dc-baf8-5dfb4bfd45f9" style="width:493px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/96de87cc50d344738e09798dc9e79ef7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/96de87cc50d344738e09798dc9e79ef7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">双亲委派模型实现源码分析</span></span></h3><div id="https://www.notion.so/b316a1acc28349a58a8753b4f1bb68a4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">双亲委派模型的实现代码非常简单，逻辑非常清晰，都集中在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">java.lang.ClassLoader</code></span><span class="SemanticString"> 的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">loadClass()</code></span><span class="SemanticString"> 中，相关代码如下所示。</span></span></p></div><pre id="https://www.notion.so/b2187cd28ebb417792bd23af2eacf748" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ClassLoader</span> parent<span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">boolean</span> resolve<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token function">getClassLoadingLock</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 首先，检查请求的类是否已经被加载过</span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> c <span class="token operator">=</span> <span class="token function">findLoadedClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">long</span> t0 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//父加载器不为空，调用父加载器loadClass()方法处理</span>
                        c <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">//父加载器为空，使用启动类加载器 BootstrapClassLoader 加载</span>
                        c <span class="token operator">=</span> <span class="token function">findBootstrapClassOrNull</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token comment">//抛出异常说明父类加载器无法完成加载请求</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">long</span> t1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//自己尝试加载</span>
                    c <span class="token operator">=</span> <span class="token function">findClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">// this is the defining class loader; record the stats</span>
                    <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getParentDelegationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTime</span><span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getFindClassTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addElapsedTimeFrom</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getFindClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">resolveClass</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> c<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/b2a1ca39dab1476d89b9388f0a8254c6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b2a1ca39dab1476d89b9388f0a8254c6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">双亲委派模型的好处</span></span></h3><div id="https://www.notion.so/7666e91400e346cbbdae95014d3e428f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">双亲委派模型保证了 Java 程序的稳定运行，可以</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">避免类的重复加载</strong></span><span class="SemanticString">（JVM 区分不同类的方式不仅仅根据类名，相同的类文件被不同的类加载器加载产生的是两个不同的类），也保证了 Java 的核心 API 不被篡改。比如我们编写一个称为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">java.lang.Object</code></span><span class="SemanticString"> 类的话，如果没有双亲委派，那么程序运行的时候，系统就会出现多个不同的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Object</code></span><span class="SemanticString"> 类。</span></span></p></div><h3 id="https://www.notion.so/cf488c3bff8c4dd3aa94c53e01c40f85" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/cf488c3bff8c4dd3aa94c53e01c40f85"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">如果我们不想用双亲委派模型怎么办？</span></span></h3><div id="https://www.notion.so/02ded6950b744c0f844d7f68e067bde8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">自定义加载器，需要继承 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ClassLoader</code></span><span class="SemanticString"> 。如果我们不想打破双亲委派模型，就重写 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ClassLoader</code></span><span class="SemanticString"> 类中的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">findClass()</code></span><span class="SemanticString"> 方法即可，无法被父类加载器加载的类最终会通过这个方法被加载。但是，如果想打破双亲委派模型则需要重写 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">loadClass()</code></span><span class="SemanticString"> 方法</span></span></p></div><h2 id="https://www.notion.so/5e9f9b5e3b3243c1bc68d794456bf86f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/5e9f9b5e3b3243c1bc68d794456bf86f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">自定义类加载器</span></span></h2><div id="https://www.notion.so/ec9ad9d0a24a48b0bb1e8b592fcbb99c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">除了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">BootstrapClassLoader</code></span><span class="SemanticString"> 其他类加载器均由 Java 实现且全部继承自</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">java.lang.ClassLoader</code></span><span class="SemanticString">。如果我们要自定义自己的类加载器，很明显需要继承 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ClassLoader</code></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/6451b029d4ff45f3b7ec15bcae952597" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
    <script src="https://utteranc.es/client.js"
        repo="youthtoday/youthtoday.github.io"
        issue-term="pathname"
        label="✨"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
  <footer class="Footer">
  <div>&copy; Nick的博客 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>
